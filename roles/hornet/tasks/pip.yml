- name: install python deps via pip
  pip:
    executable: >-
      {%- if ansible_distribution == "CentOS" and ansible_distribution_major_version == "7" -%}
      /usr/bin/pip
      {%- else -%}
      /usr/bin/pip3
      {%- endif -%}
    name:
     - docker
     - jmespath

- name: "Fix for No module named ssl_match_hostname"
  shell: "test -d /usr/local/lib/python2.7/dist-packages/backports/ssl_match_hostname/ && cp -r /usr/local/lib/python2.7/dist-packages/backports/ssl_match_hostname/ /usr/lib/python2.7/dist-packages/backports || /bin/true"
  args:
    creates: "/usr/lib/python2.7/dist-packages/backports/ssl_match_hostname/__init__.py"
  when: ansible_distribution == 'Debian'
